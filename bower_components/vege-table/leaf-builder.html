<link rel="import" href="../polymer/polymer.html">

<link rel="import" href="doc-leaf.html">

<polymer-element name="leaf-builder" attributes="items leaves db progress">
  <template>
    <link rel="stylesheet" href="../bootstrap/dist/css/bootstrap.css">
    <link rel="stylesheet" href="leaf-builder.css">

    <template if="{{ progress == 'loading' }}">
      <div class="alert alert-info">Loading&hellip;</div>
    </template>

    <template repeat="{{ leaf in leaves }}">
      <doc-leaf
        class="doc-leaf"
        db="{{ db }}"
        leaf="{{ leaf }}"
        leaves="{{ leaves }}"
        items="{{ items }}"
        on-leaf-removed="{{ removeLeaf }}"></doc-leaf>
    </template>

    <template if="{{ db }}">
      <div class="panel-body">
        <template if="{{ !adding }}">
          <div class="form-actions">
            <button type="button"
              class="btn btn-primary btn-sm"
              on-click="{{ newLeaf }}"><span class="glyphicon glyphicon-plus-sign"></span> Add a leaf</button>
          </div>
        </template>

        <template if="{{ adding }}">
          <doc-leaf
            editing="{{ adding }}"
            leaves="{{ leaves }}"
            items="{{ items }}"
            on-leaf-added="{{ addLeaf }}"></doc-leaf>
        </template>
      </div>
    </template>
  </template>
  <script src="leaf-builder.js"></script>
</polymer-element>
